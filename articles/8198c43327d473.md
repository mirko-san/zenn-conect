---
title: "OpenTelemetry-Go@v1.36.0 ã§ä½“é¨“ã™ã‚‹åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹+ãƒ­ã‚°çµ±åˆå…¥é–€"
emoji: "ğŸ”­"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Go", "OpenTelemetry", "observability"]
published: true
---

## æ¦‚è¦

è¿‘å¹´ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã«ãŠã„ã¦ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£(å¯è¦³æ¸¬æ€§)ãŒæ³¨ç›®ã•ã‚Œã¦ã„ã¾ã™ã€‚
ä¼æ¥­ã§ã‚‚ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã®å®Ÿç¾ã«ã¤ã„ã¦æ³¨ç›®ã•ã‚Œã‚‹ã“ã¨ãŒå¢—ãˆã¦ã„ã‚‹ä¸­ã€Goè¨€èªã®OpenTelemetryã«ã‚ˆã‚‹å®Ÿç¾ã«ã¤ã„ã¦ã¯å°‘ã—å‰(2024å¹´4æœˆãƒªãƒªãƒ¼ã‚¹ã®[v1.26.0](https://pkg.go.dev/go.opentelemetry.io/otel@v1.26.0)ä»¥å‰)ã¾ã§ã¯OpenTelemetry LogsãŒé–‹ç™ºä¸­ã ã£ãŸãŸã‚ã€OpenTelemetryã‚’åˆ©ç”¨ã›ãšç›£è¦–SaaSãŒæä¾›ã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå¤šã‹ã£ãŸã‚ˆã†ã«æ€ã„ã¾ã™ã€‚

ã—ã‹ã—ã€2024å¹´5æœˆãƒªãƒªãƒ¼ã‚¹ã®[v1.27.0](https://pkg.go.dev/go.opentelemetry.io/otel@v1.27.0)ã‚ˆã‚ŠOpenTelemetry LogsãŒBetaã«ä¸ŠãŒã‚Šã€2025å¹´6æœˆç¾åœ¨ã‚‚Betaã§ã¯ã‚ã‚Šã¾ã™ãŒã€ååˆ†ã«æ¥­å‹™åˆ©ç”¨ã‚‚è¦–é‡ã«å…¥ã‚‹ãƒ¬ãƒ™ãƒ«ã¾ã§é–‹ç™ºãŒé€²ã‚“ã§ãã¾ã—ãŸã€‚

ã™ã§ã«ã„ãã¤ã‚‚OpenTelemetry-Goã®å…¥é–€è¨˜äº‹ãŒã‚ã‚‹ã¨ã“ã‚ã§ã™ãŒã€ç¾åœ¨ã®OpenTelemetry-GoãŒæä¾›ã—ã¦ãã‚Œã‚‹ä½“é¨“ã‚‚ãµã¾ãˆãŸå…¥é–€è¨˜äº‹ã¨ã—ã¦ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚

## å‰æ

- Go 1.24.3
- OpenTelemetry-Go v1.36.0

## ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£æ¦‚è¦

ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£(å¯è¦³æ¸¬æ€§)ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã®å†…éƒ¨çŠ¶æ…‹ã‚’å¤–éƒ¨ã‹ã‚‰æŠŠæ¡ã§ãã‚‹èƒ½åŠ›ã‚’æŒ‡ã—ã¾ã™ã€‚
éšœå®³å¯¾å¿œã‚„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ã®ãŸã‚ã«æ³¨ç›®ã•ã‚Œã¦ã„ã¾ã™ã€‚

## OpenTelemetryæ¦‚è¦

ã“ã®è¨˜äº‹ã§ã¯ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ã®å®Ÿç¾æ‰‹æ³•ã¨ã—ã¦ã€OpenTelemetryã§ã®å®Ÿç¾ã‚’æƒ³å®šã—ã¾ã™ã€‚
OpenTelemetryã«ã¤ã„ã¦ã”å­˜çŸ¥ã§ã¯ãªã„æ–¹å‘ã‘ã«ã€ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯OpenTelemetryã«ã¤ã„ã¦ã®èª¬æ˜ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

OpenTelemetry(ä»¥ä¸‹OTel)ã¯ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚Šã€ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã§ã™ã€‚
ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã‚„ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ä»–ã®ãƒ„ãƒ¼ãƒ«ã«ä»»ã›ã¦ãŠã‚Šã€OTelã¯æ¸¬å®šãƒ‡ãƒ¼ã‚¿ã‚’ä»–ãƒ„ãƒ¼ãƒ«ã«é€ä¿¡ã™ã‚‹éƒ¨åˆ†ã‚’æ‹…ã£ã¦ã„ã¾ã™ã€‚

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒ­ã‚°ã€ãƒˆãƒ¬ãƒ¼ã‚¹ãªã©ã®æ¸¬å®šãƒ‡ãƒ¼ã‚¿(ã‚·ã‚°ãƒŠãƒ«)ã‚’ç™ºã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’è¨ˆè£…ã¨è¨€ã„ã¾ã™ã€‚
ãã—ã¦ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨ˆè£…ã‚’æ‰‹åŠ©ã‘ã™ã‚‹ãƒ„ãƒ¼ãƒ«ãŒOTelã§ã™ã€‚

:::message
ã€Œãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ»ãƒ­ã‚°ãƒ»ãƒˆãƒ¬ãƒ¼ã‚¹ã€: ç›£è¦–SaaSã®å‹‰å¼·ä¼šã«è¡Œãã¨MELT(ãƒ¡ãƒ«ãƒˆ)ã¨ç•¥ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã£ãŸã‚Šã—ã¾ã™
ã€Œè¨ˆè£…ã€: å…ƒã€…ã¯è¨­å‚™ç”¨èªï¼Ÿã¨ã—ã¦ã€å™¨å…·ãªã©ã«æ¸¬å®šè£…ç½®ã‚’è£…å‚™ã™ã‚‹ã“ã¨ã‚’è¨ˆè£…ã¨è¨€ã£ã¦ãŸã‚Šã™ã‚‹ã¿ãŸã„ã§ã™
:::

### æ¸¬å®šãƒ‡ãƒ¼ã‚¿(ã‚·ã‚°ãƒŠãƒ«)ã®ç¨®é¡

#### ãƒ­ã‚°

ãƒ­ã‚°ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸­ã§ç‰¹å®šã®ã‚³ãƒ¼ãƒ‰è¡ŒãŒå®Ÿè¡Œã•ã‚Œã‚‹ã¨å‡ºåŠ›ã•ã‚Œã‚‹ã‚‚ã®ã§ã™ãŒã€ãƒ­ã‚°ã§ã®ç›£è¦–ã‚„ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªå›°ã‚Šã”ã¨ãŒã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚

- DBã®å‡¦ç†å¤±æ•—ãƒ­ã‚°ãŒå‡ºã¦ã„ã‚‹ãŒã€å…¨ã¦ã«ãŠã„ã¦å‡ºã¦ã„ã‚‹è¨³ã§ã¯ç„¡ã•ãã†ã€‚å‰å‡¦ç†ã®æ¡ä»¶ã«ä¾å­˜ã—ã¦ã„ãã†ã ãŒã€é–¢ä¿‚æ€§ãŒåˆ†ã‹ã‚‰ãªã„
- ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãŒæ²¢å±±å‡ºã¦ã„ã‚‹ã‘ã©ã€ã“ã‚Œã¯ã©ã®é¡§å®¢ã§ã®ã‚¨ãƒ©ãƒ¼ãªã®ã‹ï¼Ÿ

ä¸Šè¨˜ã®ã‚ˆã†ãªèª²é¡ŒãŒæ¬¡ã«èª¬æ˜ã™ã‚‹åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹ã¨ã®é€£æºã«ã‚ˆã£ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è§£æ±ºã—ã¾ã™ã€‚

- åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹ã®ã‚¹ãƒ‘ãƒ³ã«ãƒ­ã‚°ã‚’å«ã‚ã‚‹ã“ã¨ã§ã€ç‰¹å®šãƒ­ã‚°ã®å‰å‡¦ç†ã‚’ç‰¹å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚‹
- åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«é¡§å®¢æƒ…å ±ã‚’å«ã‚ã‚‹ã“ã¨ã§ã€ãƒ­ã‚°ã«ã‚‚é¡§å®¢æƒ…å ±ãŒå«ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹

:::message
ãƒ­ã‚°ã¸ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¿½åŠ ã«ã¤ã„ã¦ã¯ã€æ§‹é€ åŒ–ãƒ­ã‚°ã§æ—¢ã«å®Ÿç¾ã—ã¦ã„ã‚‹æ–¹ã‚‚ã„ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚ãã®å ´åˆã«ãŠã„ã¦ã‚‚OTelã¨é€£æºã™ã‚‹ã“ã¨ã§ã€å‰å¾Œã®æƒ…å ±ãŒé–¢é€£ä»˜ã‘ã‚‰ã‚Œã‚‹ç­‰ã®æ©æµãŒã‚ã‚Šã¾ã™ã€‚
:::

#### åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹

åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹(ä»¥å¾Œãƒˆãƒ¬ãƒ¼ã‚¹)ã¯ã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ãªã©ã®è¤‡æ•°ã®ã‚µãƒ¼ãƒ“ã‚¹ã§æ§‹æˆã•ã‚ŒãŸã‚µãƒ¼ãƒ“ã‚¹ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒè¾¿ã£ãŸçµŒè·¯ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚
ãƒˆãƒ¬ãƒ¼ã‚¹ã¯1ã¤ä»¥ä¸Šã®ã‚¹ãƒ‘ãƒ³ã§æ§‹æˆã•ã‚Œã€ã‚¹ãƒ‘ãƒ³ã¯è¦ªå­é–¢ä¿‚ã‚’æŒã¤ã“ã¨ãŒã§ãã¾ã™ã€‚
ã‚¹ãƒ‘ãƒ³ã¯ä¸‹è¨˜ã®å›³ã§ã„ã†ã¨1ã¤ã®å››è§’ã®ã“ã¨ã§ã™ã€‚

![https://opentelemetry.io/ja/docs/concepts/observability-primer/ ã‚ˆã‚Š](/images/8198c43327d473/waterfall-trace.png)
(ç”»åƒã¯ https://opentelemetry.io/ja/docs/concepts/observability-primer/ ã‚ˆã‚Š)

ã‚¹ãƒ‘ãƒ³ã¯æ§‹é€ åŒ–ãƒ­ã‚°ã‚„ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

#### ãƒ¡ãƒˆãƒªã‚¯ã‚¹

ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã®ç‰¹å®šã®å€¤ã‚’ã€ç›£è¦–ãƒ„ãƒ¼ãƒ«ãŒé›†è¨ˆã—ã‚„ã™ã„å€¤ã¨ã—ã¦å‡ºåŠ›ã—ã¾ã™ã€‚
æ´»ç”¨ä¾‹ã¨ã—ã¦ã¯ã€httpãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ç•ªå·ã”ã¨ã«è¿”ã—ãŸå›æ•°ã‚’ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã€ç­‰ãŒã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚(200ãŒnå›ã€404ãŒnå›â€¦ãªã©)
ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ç°¡æ˜“çš„ã«é›†è¨ˆæ¸ˆã¿ã®å€¤ã‚’å‡ºåŠ›ã—ã¦ã„ã‚‹ãŸã‚ã€ãƒ­ã‚°ç­‰ã‹ã‚‰é›†è¨ˆã™ã‚‹ã‚ˆã‚Šã‚‚åŠ¹ç‡çš„ã«æ•°å€¤ã®é›†è¨ˆãŒå‡ºæ¥ã¾ã™ã€‚

##### Prometheusã¨ã®æ¯”è¼ƒ

OTelã§ã¯ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚‚ã‚·ã‚°ãƒŠãƒ«ã¨ã—ã¦æ‰±ã†ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ã„ãˆã°Prometheusã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹æ–¹ã‚‚ã„ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚
ç­†è€…ã¯ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’Prometheusã§å‡ºåŠ›ã™ã‚‹ã‹OTelã§å‡ºåŠ›ã™ã‚‹ã‹ã¯ã‚±ãƒ¼ã‚¹ãƒã‚¤ã‚±ãƒ¼ã‚¹ã‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ãªç‰¹å¾´ãŒã‚ã‚‹ã®ã§ã€ã‚·ã‚¹ãƒ†ãƒ ã®æ€§è³ªã«ã‚ˆã£ã¦é¸æŠã™ã‚‹ã®ãŒè‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚

- Prometheusã®ç‰¹å¾´
  - ã‚µãƒ¼ãƒ“ã‚¹ãŒå…¬é–‹ã™ã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å·¡å›ã—ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–å¾—ã™ã‚‹pullå‹ã§ã‚ã‚‹
  - ã‚µãƒ¼ãƒ“ã‚¹ã¯ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å…¬é–‹ã™ã‚‹ã“ã¨ã®ã¿ã«è²¬ä»»ãŒã‚ã‚Šã€ã‚µãƒ¼ãƒ“ã‚¹ã«è² è·ã‚’ã‹ã‘ãšã«è¨ˆè£…ãŒå¯èƒ½
  - å…±é€šã®PrometheusãŒè¤‡æ•°ã®ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã—ã¦ã„ã‚‹å ´åˆã€ã‚µãƒ¼ãƒ“ã‚¹ã”ã¨ã®ç´°ã‹ã„è¨­å®šã‚’ã™ã‚‹ã®ãŒå°‘ã€…é¢å€’
- OTelã§ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹å‡ºåŠ›ã®ç‰¹å¾´
  - exporteræ¬¡ç¬¬ã ãŒã€ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¸ã®ç›´æ¥ã®pushå‹ãŒæ¡ç”¨å‡ºæ¥ã‚‹
  - pushå‹ã®å ´åˆã€ã‚µãƒ¼ãƒ“ã‚¹ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å‡ºåŠ›è¨­å®šã‚’ç´°ã‹ãè¨­å®šã—ã‚„ã™ã„
  - pushå‹ã¯ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰(ã‚‚ã—ãã¯OTel Collector)ã¸ã®é€ä¿¡ã¾ã§è²¬ä»»ãŒã‚ã‚‹ãŸã‚ã€ã‚µãƒ¼ãƒ“ã‚¹ã«è² è·ãŒã‹ã‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
  - prometheus exporterã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§pullå‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚‚å¯¾å¿œå¯èƒ½ã€‚ã“ã®å ´åˆOTelã®ã¿ã§pullå‹ã«å¯¾å¿œã§ãã€ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å‰Šæ¸›ã§ãã‚‹ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹

## ãƒãƒ³ã‚ºã‚ªãƒ³

ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†ã—ã¦ã„ãã“ã¨ã§ã€OTelã®åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹ã¨ãƒ­ã‚°ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«è¨ˆè£…ã—ã¦ã„ãã¾ã™ã€‚
ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«é–¢ã—ã¦ã¯å–ã‚Šæ‰±ã„ã¾ã›ã‚“ã€‚

ã¾ãŸã€ãƒãƒ³ã‚ºã‚ªãƒ³ã‚’é †ã‚’è¿½ã£ã¦ä½œæ¥­ã›ãšã€æœ€çµ‚çš„ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«èˆˆå‘³ãŒã‚ã‚‹æ–¹ã¯ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ã”å‚ç…§ãã ã•ã„ã€‚

https://github.com/mirko-san/example-otel/tree/main/example/with-trace-and-log

### ãƒ™ãƒ¼ã‚¹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç”¨æ„ã—ã¾ã™ã€‚
ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»»æ„ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç”¨æ„ã—ã¾ã™ã€‚

```go:go.mod
module example-otel

go 1.24.3
```

```go:server/main.go
package main

import (
	"context"
	"fmt"
	"io"
	"log/slog"
	"net/http"
	"os"

	"go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp"
)

func getEnv(key, fallback string) string {
	if v, ok := os.LookupEnv(key); ok {
		return v
	}
	return fallback
}

func helloHandler(logger *slog.Logger) http.HandlerFunc {
	return func(w http.ResponseWriter, r *http.Request) {
		ctx := r.Context()
		logger.InfoContext(ctx, "Received request")
		fmt.Fprintf(w, "Hello, World")
	}
}

func errorHandler(logger *slog.Logger) http.HandlerFunc {
	return func(w http.ResponseWriter, r *http.Request) {
		ctx := r.Context()
		logger.InfoContext(ctx, "Received request")
		http.Error(w, "Internal Server Error", http.StatusInternalServerError)
	}
}

func httpbinHandler(logger *slog.Logger) http.HandlerFunc {
	return func(w http.ResponseWriter, r *http.Request) {
		ctx := r.Context()
		logger.InfoContext(ctx, "Received request")
		path := r.URL.Path[len("/httpbin"):]
		targetURL := "https://httpbin.org/" + path

		resp, err := otelhttp.Get(r.Context(), targetURL)
		if err != nil {
			http.Error(w, "Failed to fetch data from httpbin", http.StatusInternalServerError)
			return
		}
		defer resp.Body.Close()

		w.WriteHeader(resp.StatusCode)
		io.Copy(w, resp.Body)
	}
}

func main() {
	ctx := context.Background()
	logger := slog.New(slog.NewJSONHandler(os.Stdout, nil))
	serverPort := getEnv("EXAMPLE_SERVER_PORT", "3030")

	mux := http.NewServeMux()

	mux.Handle("/hello", helloHandler(logger))
	mux.Handle("/error", errorHandler(logger))
	mux.Handle("/httpbin/", httpbinHandler(logger))
	err := http.ListenAndServe(fmt.Sprintf(":%s", serverPort), mux)
	if err != nil {
		logger.ErrorContext(ctx, err.Error())
	}
}
```

```go:client/main.go
package main

import (
	"context"
	"flag"
	"fmt"
	"io"
	"log/slog"
	"net/http"
	"os"
)

func main() {
	ctx := context.Background()
	logger := slog.New(slog.NewJSONHandler(os.Stdout, nil))

	url := flag.String("server", "http://localhost:3030/hello", "server url")
	flag.Parse()

	client := http.Client{Transport: http.DefaultTransport}

	var body []byte
	var statusCode int

	err := func() error {
		req, _ := http.NewRequestWithContext(ctx, "GET", *url, nil)

		logger.InfoContext(ctx, "Sending request...")
		res, err := client.Do(req)
		if err != nil {
			panic(err)
		}
		body, err = io.ReadAll(res.Body)
		_ = res.Body.Close()

		statusCode = res.StatusCode

		return err
	}()
	if err != nil {
		logger.ErrorContext(ctx, err.Error())
	}

	logger.InfoContext(ctx, fmt.Sprintf("Response Received: %s", body))
	logger.InfoContext(ctx, fmt.Sprintf("Response status: %d", statusCode))
}
```

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã‚µãƒ¼ãƒãƒ¼ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒHTTPã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã™ã‚‹ã¨ã„ã†å˜ç´”ãªã‚‚ã®ã§ã™ã€‚

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚

```shellsession
$ go mod tidy
```

ã¾ãšã¯ã€ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¾ã™ã€‚

```shellsession
$ go run server/main.go
```

ã“ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ 3030 ãƒãƒ¼ãƒˆã§èµ·å‹•ã—ã‚ˆã†ã¨ã™ã‚‹ãŸã‚ã€ã‚‚ã—åˆ¥ã®ãƒãƒ¼ãƒˆã‚’åˆ©ç”¨ã—ãŸã„å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ç’°å¢ƒå¤‰æ•°ã‚’æŒ‡å®šã—ã¦èµ·å‹•ã—ã¦ãã ã•ã„ã€‚

```shellsession
$ EXAMPLE_SERVER_PORT=<ãƒãƒ¼ãƒˆç•ªå·> go run server/main.go
```

æ¬¡ã«ã€`Hello, World`ã‚’è¿”ã™ã‚ˆã†ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```shellsession
# åˆ¥ã®ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦å®Ÿè¡Œ
$ go run client/main.go
```

ã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ¼ãƒˆã‚’å¤‰æ›´ã—ã¦ã„ãŸå ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«URLã‚’æŒ‡å®šã—ã¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```shellsession
$ go run client/main.go --server http://localhost:<ãƒãƒ¼ãƒˆç•ªå·>/hello
```

ä¸Šè¨˜ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€æ¨™æº–å‡ºåŠ›ã«ä»¥ä¸‹ã®ã‚ˆã†ã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚

ã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚

```json
{ "time": "<çœç•¥>", "level": "INFO", "msg": "Received request" }
```

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚

```json
{"time":"<çœç•¥>","level":"INFO","msg":"Sending request..."}
{"time":"<çœç•¥>","level":"INFO","msg":"Response Received: Hello, World"}
{"time":"<çœç•¥>","level":"INFO","msg":"Response status: 200"}
```

### åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹ã®è¨ˆè£…

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§åˆ©ç”¨ã‚’å§‹ã‚ã‚‹ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å–å¾—ã—ã¾ã™ã€‚

```shellsession
$ go get go.opentelemetry.io/otel/exporters/stdout/stdouttrace \
	go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp \
	go.opentelemetry.io/otel
```

#### ã‚µãƒ¼ãƒãƒ¼

`server/main.go`ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã—ã¾ã™ã€‚

ä»¥ä¸‹ã‚’import blockã«è¿½åŠ ã—ã¾ã™ã€‚

```go
	"go.opentelemetry.io/otel/exporters/stdout/stdouttrace"
	"go.opentelemetry.io/otel"
	"go.opentelemetry.io/otel/propagation"
	"go.opentelemetry.io/otel/sdk/resource"
	sdktrace "go.opentelemetry.io/otel/sdk/trace"
	semconv "go.opentelemetry.io/otel/semconv/v1.32.0"
```

`main`é–¢æ•°ã®ä¸Šãªã©ã«ã€ä»¥ä¸‹ã®é–¢æ•°ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```go
func initTracer(ctx context.Context) (*sdktrace.TracerProvider, error) {
	exp, err := newTraceExporter(ctx)
	if err != nil {
		return nil, err
	}

	resource := resource.NewWithAttributes(
		semconv.SchemaURL,
		semconv.ServiceName("example-otel/server"),
	)

	bsp := sdktrace.NewSimpleSpanProcessor(exp)

	tp := sdktrace.NewTracerProvider(
		sdktrace.WithSampler(sdktrace.AlwaysSample()),
		sdktrace.WithSpanProcessor(bsp),
		sdktrace.WithResource(resource),
	)
	otel.SetTracerProvider(tp)
	otel.SetTextMapPropagator(propagation.NewCompositeTextMapPropagator(propagation.TraceContext{}, propagation.Baggage{}))
	return tp, nil
}

func newTraceExporter(ctx context.Context) (sdktrace.SpanExporter, error) {
	return stdouttrace.New(
		stdouttrace.WithPrettyPrint(),
	)
}
```

`main`é–¢æ•°ã®loggerã®å®šç¾©ã®ä¸‹ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```go
	tp, err := initTracer(ctx)
	if err != nil {
		logger.ErrorContext(ctx, fmt.Sprintf("error setting up OTel Trace SDK - %e", err))
	}
	defer func() {
		if err := tp.Shutdown(context.Background()); err != nil {
			logger.Error(fmt.Sprintf("Error shutting down tracer provider: %e", err))
		}
	}()
```

httpãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®å®Ÿè£…ç®‡æ‰€ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚

```go
	mux.Handle("/hello", otelhttp.NewHandler(http.HandlerFunc(helloHandler(logger)), "hello"))
	mux.Handle("/error", otelhttp.NewHandler(http.HandlerFunc(errorHandler(logger)), "error"))
	mux.Handle("/httpbin/", otelhttp.NewHandler(http.HandlerFunc(httpbinHandler(logger)), "httpbin"))
	// err := ã‚’ = ã«
	err = http.ListenAndServe(fmt.Sprintf(":%s", serverPort), mux)
```

#### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

`client/main.go`ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã—ã¾ã™ã€‚

ä»¥ä¸‹ã‚’import blockã«è¿½åŠ ã—ã¾ã™ã€‚

```go
	"go.opentelemetry.io/otel/exporters/stdout/stdouttrace"
	"go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp"
	"go.opentelemetry.io/otel"
	"go.opentelemetry.io/otel/propagation"
	"go.opentelemetry.io/otel/sdk/resource"
	sdktrace "go.opentelemetry.io/otel/sdk/trace"
	semconv "go.opentelemetry.io/otel/semconv/v1.32.0"
```

`main`é–¢æ•°ã®ä¸Šãªã©ã«ã€ä»¥ä¸‹ã®é–¢æ•°ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```go
func initTracer(ctx context.Context) (*sdktrace.TracerProvider, error) {
	exp, err := newTraceExporter(ctx)
	if err != nil {
		return nil, err
	}

	resource := resource.NewWithAttributes(
		semconv.SchemaURL,
		semconv.ServiceName("example-otel/client"),
	)

	bsp := sdktrace.NewSimpleSpanProcessor(exp)

	tp := sdktrace.NewTracerProvider(
		sdktrace.WithSampler(sdktrace.AlwaysSample()),
		sdktrace.WithSpanProcessor(bsp),
		sdktrace.WithResource(resource),
	)
	otel.SetTracerProvider(tp)
	otel.SetTextMapPropagator(propagation.NewCompositeTextMapPropagator(propagation.TraceContext{}, propagation.Baggage{}))
	return tp, nil
}

func newTraceExporter(ctx context.Context) (sdktrace.SpanExporter, error) {
	return stdouttrace.New(
		stdouttrace.WithPrettyPrint(),
	)
}
```

`main`é–¢æ•°ã®loggerã®å®šç¾©ã®ä¸‹ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```go
	tp, err := initTracer(ctx)
	if err != nil {
		logger.ErrorContext(ctx, fmt.Sprintf("error setting up OTel Trace SDK - %e", err))
	}
	defer func() {
		if err := tp.Shutdown(context.Background()); err != nil {
			logger.Error(fmt.Sprintf("Error shutting down tracer provider: %e", err))
		}
	}()
```

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å®šç¾©ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚

```go
	client := http.Client{Transport: otelhttp.NewTransport(http.DefaultTransport)}
```

ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹é–¢æ•°ã®ã‚¨ãƒ©ãƒ¼ã®å®šç¾©ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

```go
	// err := ã‚’ = ã«
	err = func() error {
		req, _ := http.NewRequestWithContext(ctx, "GET", *url, nil)
		...
	}
```

#### å‹•ä½œç¢ºèª

ã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã‚’å†å®Ÿè¡Œã—ã¾ã™ã€‚

```shellsession
$ go run server/main.go
```

åˆ¥ã®ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```shellsession
$ go run client/main.go
```

ã‚µãƒ¼ãƒãƒ¼ã®æ¨™æº–å‡ºåŠ›ã«ä»¥ä¸‹ã®ã‚ˆã†ãªjsonãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚(ä»£è¡¨çš„ãªã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã®ã¿æŠœç²‹)

```json
{
	"Name": "hello",
	"SpanContext": {
		"TraceID": "e88d666bd9fb09de543d0004ecb426d4",
		"SpanID": "435ad3539a848e63",
		"TraceFlags": "01",
		"TraceState": "",
		"Remote": false
	},
	"Parent": {
		"TraceID": "e88d666bd9fb09de543d0004ecb426d4",
		"SpanID": "ff2ac65beb1595f1",
		...
	},
	"Resource": [
		{
			"Key": "service.name",
			"Value": {
				"Type": "STRING",
				"Value": "example-otel/server"
			}
		}
	],
	"Attributes": [
		{
			"Key": "server.address",
			"Value": {
				"Type": "STRING",
				"Value": "localhost"
			}
		},
		{
			"Key": "http.request.method",
			"Value": {
				"Type": "STRING",
				"Value": "GET"
			}
		},
		{
			"Key": "url.scheme",
			"Value": {
				"Type": "STRING",
				"Value": "http"
			}
		},
		{
			"Key": "server.port",
			"Value": {
				"Type": "INT64",
				"Value": 3030
			}
		},
		...
	],
	...
}
```

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ¨™æº–å‡ºåŠ›ã«ä»¥ä¸‹ã®ã‚ˆã†ãªjsonãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚(ä»£è¡¨çš„ãªã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã®ã¿æŠœç²‹)

```json
{
	"Name": "HTTP GET",
	"SpanContext": {
		"TraceID": "e88d666bd9fb09de543d0004ecb426d4",
		"SpanID": "ff2ac65beb1595f1",
		"TraceFlags": "01",
		"TraceState": "",
		"Remote": false
	},
	"Parent": {
		"TraceID": "00000000000000000000000000000000",
		"SpanID": "0000000000000000",
		...
	},
	"Resource": [
		{
			"Key": "service.name",
			"Value": {
				"Type": "STRING",
				"Value": "example-otel/client"
			}
		}
	],
	"Attributes": [
		{
			"Key": "http.request.method",
			"Value": {
				"Type": "STRING",
				"Value": "GET"
			}
		},
		{
			"Key": "url.full",
			"Value": {
				"Type": "STRING",
				"Value": "http://localhost:3030/hello"
			}
		},
		{
			"Key": "server.address",
			"Value": {
				"Type": "STRING",
				"Value": "localhost"
			}
		},
		{
			"Key": "server.port",
			"Value": {
				"Type": "INT64",
				"Value": 3030
			}
		},
		{
			"Key": "network.protocol.version",
			"Value": {
				"Type": "STRING",
				"Value": "1.1"
			}
		},
		{
			"Key": "http.response.status_code",
			"Value": {
				"Type": "INT64",
				"Value": 200
			}
		}
	],
	...
}
```

ã“ã®jsonä¸­ã§ç‰¹å¾´çš„ãªã®ãŒã€ä»¥ä¸‹ã®ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã§ã™ã€‚

- SpanContext
- Parent
- Resource
- Attributes

`SpanContext`, `Parent`ã«ã¯`TraceID`,`SpanID`ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
`TraceID`ã¯ãƒˆãƒ¬ãƒ¼ã‚¹ã«å…±é€šã—ã¦æŒ¯ã‚‰ã‚Œã‚‹ãƒ¦ãƒ‹ãƒ¼ã‚¯IDã§ã™ã€‚ä¾‹ç¤ºã—ãŸjsonã§ã‚‚`TraceID`ã¯å…±é€šã—ã¦ã„ã¾ã™ã€‚
`SpanID`ã¯ã€Œæ¸¬å®šãƒ‡ãƒ¼ã‚¿(ã‚·ã‚°ãƒŠãƒ«)ã®ç¨®é¡ã€ã®ã€Œåˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¨˜è¼‰ã—ãŸé€šã‚Šã€ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’æ§‹æˆã™ã‚‹ç´°ã‹ãªå‡¦ç†ã«ã¤ã„ã¦æŒ¯ã‚‰ã‚ŒãŸIDã§ã™ã€‚ã‚¹ãƒ‘ãƒ³ã«ã¯è¦ªå­é–¢ä¿‚ãŒã‚ã‚‹ã®ã§ã€`Parent`ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã«ã¯è¦ªã®ã‚¹ãƒ‘ãƒ³ã®æƒ…å ±ã‚’æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚ä¾‹ç¤ºã—ãŸjsonã§ã‚‚ã‚µãƒ¼ãƒãƒ¼ã®ãƒˆãƒ¬ãƒ¼ã‚¹ã®`Parent`ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚¹ãƒ‘ãƒ³ã®æƒ…å ±ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚

`Resource`ã«ã¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’å‡ºåŠ›ã—ã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã«ã¤ã„ã¦ã®æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ã‚ãŸã‚Šã®æƒ…å ±ã¯`initTracer`é–¢æ•°ã®ãƒªã‚½ãƒ¼ã‚¹å®šç¾©ã®ç®‡æ‰€ã§å®šç¾©ã—ãŸæƒ…å ±ãŒæ ¼ç´ã•ã‚Œã¾ã™ã€‚

`Attributes`ã¯ã‚¹ãƒ‘ãƒ³ã«ç‹¬è‡ªã«ä»˜ä¸ã—ãŸå±æ€§ãŒå«ã¾ã‚Œã¾ã™ã€‚ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«å®Ÿè£…ã§ã¯`otelhttp`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒä»˜ä¸ã—ã¦ã„ã‚‹ã‚‚ã®ã§ã™ã€‚
ãŸã¨ãˆã°`Attributes`ã«é¡§å®¢IDã‚’å…¥ã‚Œã¦ãŠãã¨ã€`http.response.status_code`ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã‚’é›†è¨ˆã—ã¦ã‚¨ãƒ©ãƒ¼ãŒå¢—ãˆã¦ã„ã‚‹ã®ã‚’è¦‹ã¤ã‘ãŸã¨ãã€ã•ã‚‰ã«é¡§å®¢IDã§çµã‚Šè¾¼ã‚€ã“ã¨ã§ã€Œç‰¹å®šã®é¡§å®¢ã®ã¿ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ã‚‹ã®ã‹ï¼Ÿã€ç­‰ã®åˆ†æãŒã§ãã¾ã™ã€‚

### ãƒ­ã‚°ã®è¨ˆè£…

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§åˆ©ç”¨ã‚’å§‹ã‚ã‚‹ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å–å¾—ã—ã¾ã™ã€‚

```shellsession
$ go get go.opentelemetry.io/contrib/bridges/otelslog \
	go.opentelemetry.io/otel/exporters/stdout/stdoutlog \
	go.opentelemetry.io/otel/sdk/log
```

#### ã‚µãƒ¼ãƒãƒ¼

`server/main.go`ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã—ã¾ã™ã€‚

ä»¥ä¸‹ã‚’import blockã«è¿½åŠ ã—ã¾ã™ã€‚

```go
	"go.opentelemetry.io/contrib/bridges/otelslog"
	"go.opentelemetry.io/otel/exporters/stdout/stdoutlog"
	sdklog "go.opentelemetry.io/otel/sdk/log"
```

`main`é–¢æ•°ã®ä¸Šãªã©ã«ã€ä»¥ä¸‹ã®é–¢æ•°ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```go
func initLogger(ctx context.Context) (*slog.Logger, error) {
	exp, err := newLogExporter()
	if err != nil {
		return nil, err
	}

	resource := resource.NewWithAttributes(
		semconv.SchemaURL,
		semconv.ServiceName("example-otel/server"),
	)

	lp := sdklog.NewLoggerProvider(
		sdklog.WithResource(resource),
		sdklog.WithProcessor(sdklog.NewSimpleProcessor(exp)),
	)

	logger := otelslog.NewLogger("example-otel/server", otelslog.WithLoggerProvider(lp))
	return logger, nil
}

func newLogExporter() (sdklog.Exporter, error) {
	return stdoutlog.New(
		stdoutlog.WithWriter(os.Stdout),
		stdoutlog.WithPrettyPrint(),
	)
}
```

`main`é–¢æ•°ã®loggerã®å®šç¾©ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚

```go
	logger, err := initLogger(ctx)
	if err != nil {
		panic(fmt.Sprintf("error setting up OTel Log SDK - %v", err))
	}
```

#### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

`client/main.go`ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã—ã¾ã™ã€‚

ä»¥ä¸‹ã‚’import blockã«è¿½åŠ ã—ã¾ã™ã€‚

```go
	"go.opentelemetry.io/contrib/bridges/otelslog"
	"go.opentelemetry.io/otel/exporters/stdout/stdoutlog"
	sdklog "go.opentelemetry.io/otel/sdk/log"
```

`main`é–¢æ•°ã®ä¸Šãªã©ã«ã€ä»¥ä¸‹ã®é–¢æ•°ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```go
func initLogger(ctx context.Context) (*slog.Logger, error) {
	exp, err := newLogExporter()
	if err != nil {
		return nil, err
	}

	resource := resource.NewWithAttributes(
		semconv.SchemaURL,
		semconv.ServiceName("example-otel/client"),
	)

	lp := sdklog.NewLoggerProvider(
		sdklog.WithResource(resource),
		sdklog.WithProcessor(sdklog.NewSimpleProcessor(exp)),
	)

	logger := otelslog.NewLogger("example-otel/client", otelslog.WithLoggerProvider(lp))
	return logger, nil
}

func newLogExporter() (sdklog.Exporter, error) {
	return stdoutlog.New(
		stdoutlog.WithWriter(os.Stdout),
		stdoutlog.WithPrettyPrint(),
	)
}
```

`main`é–¢æ•°ã®loggerã®å®šç¾©ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚

```go
	logger, err := initLogger(ctx)
	if err != nil {
		panic(fmt.Sprintf("error setting up OTel Log SDK - %v", err))
	}
```

#### å‹•ä½œç¢ºèª

ã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã‚’å†å®Ÿè¡Œã—ã¾ã™ã€‚

```shellsession
$ go run server/main.go
```

åˆ¥ã®ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```shellsession
$ go run client/main.go
```

ã‚µãƒ¼ãƒãƒ¼ã®æ¨™æº–å‡ºåŠ›ã«ä»¥ä¸‹ã®ã‚ˆã†ãªjsonãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚(ä»£è¡¨çš„ãªã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã®ã¿æŠœç²‹)

```json
{
	"Timestamp": "<çœç•¥>",
	"SeverityText": "INFO",
	"Body": {
		"Type": "String",
		"Value": "Received request"
	},
	"TraceID": "284ba669ce9a46bd804084d29cdf033c",
	"SpanID": "3bb452a60dd5ff7a",
	"Resource": [
		{
			"Key": "service.name",
			"Value": {
				"Type": "STRING",
				"Value": "example-otel/server"
			}
		}
	],
	"Attributes": [],
	...
}
```

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ¨™æº–å‡ºåŠ›ã«ä»¥ä¸‹ã®ã‚ˆã†ãªjsonãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚(ä»£è¡¨çš„ãªã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã®ã¿æŠœç²‹)

```json
{
	"Timestamp": "<çœç•¥>",
	"SeverityText": "INFO",
	"Body": {
		"Type": "String",
		"Value": "Sending request..."
	},
	"TraceID": "00000000000000000000000000000000",
	"SpanID": "0000000000000000",
	"Resource": [
		{
			"Key": "service.name",
			"Value": {
				"Type": "STRING",
				"Value": "example-otel/client"
			}
		}
	],
	"Attributes": [],
	...
}
```

ã“ã®å†…å®¹ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€å…ƒã€…ã®slogã®å†…å®¹ã§è¨˜è¼‰ã•ã‚Œã¦ã„ãŸã€Œæ™‚åˆ»ã€ã€Œãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã€ã€Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã®è¦ç´ ã«è¿½åŠ ã—ã¦ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã¨åŒæ§˜ã«`TraceID`,`SpanID`,`Resource`,`Attributes`ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚

ã•ã‚‰ã«ã€`TraceID`ã«ç€ç›®ã—ã¦ã¿ã‚‹ã¨ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®`Sending request...`ã®ãƒ­ã‚°ãŒã‚ã‚‹æ™‚ç‚¹ã§ã¯httpã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å‡¦ç†ãŒç™ºç”Ÿã—ã¦ã„ãªã„ãŸã‚ã€ä½•ã‚‚ãƒˆãƒ¬ãƒ¼ã‚¹ãŒãªãã€ãƒ­ã‚°ã«ã‚‚`TraceID`ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
ã§ã™ãŒã€ã‚µãƒ¼ãƒãƒ¼ã®`Received request`ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹åœ°ç‚¹ã§ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒˆãƒ¬ãƒ¼ã‚¹ãŒé–‹å§‹ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€`TraceID`ã‚„`SpanID`ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã®ã‚ˆã†ã«ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã¨ãƒ­ã‚°ã«OTelã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€å…±é€šã®`TraceID`ã‚„`SpanID`ãŒç›¸äº’ã«ç´ã¥ãã“ã¨ã«ãªã‚Šã¾ã™ã€‚

## å¯è¦–åŒ–ã—ã¦ã¿ã‚‹

ã“ã®è¨˜äº‹ã®å†’é ­ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¼‰ã—ã¾ã—ãŸã€‚

> OpenTelemetry(ä»¥ä¸‹OTel)ã¯ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚Šã€ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã§ã™ã€‚
> ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã‚„ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ä»–ã®ãƒ„ãƒ¼ãƒ«ã«ä»»ã›ã¦ãŠã‚Šã€OTelã¯æ¸¬å®šãƒ‡ãƒ¼ã‚¿ã‚’ä»–ãƒ„ãƒ¼ãƒ«ã«é€ä¿¡ã™ã‚‹éƒ¨åˆ†ã‚’æ‹…ã£ã¦ã„ã¾ã™ã€‚

å®Ÿéš›ã«OTelã‚’åˆ©ç”¨ã™ã‚‹éš›ã¯ã€å¯è¦–åŒ–ç”¨ã®SaaSã‚’åˆ©ç”¨ã™ã‚‹æ–¹ãŒå¤šã„ã‹ã¨æ€ã„ã¾ã™ã€‚
(Datadog, Grafana, New Relic, Splunk ãªã©â€¦)

æœ€å¾Œã«ã€å®Ÿéš›ã®åˆ©ç”¨æ„Ÿã«è¿‘ã„ã€å¯è¦–åŒ–SaaSã‚’åˆ©ç”¨ã—ãŸå ´åˆã®ä½“é¨“ã‚’ã”ç´¹ä»‹ã—ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚

ä»Šå›ã¯ã€[honeycomb]ã‚’åˆ©ç”¨ã—ã¦å¯è¦–åŒ–ã‚’ã—ã¦ã¿ã¾ã™ã€‚

:::message
[honeycomb]ã¯ã‚ªãƒ©ã‚¤ãƒªãƒ¼ã®[ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒ»ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°](https://www.oreilly.co.jp/books/9784814400126/)ã®è‘—è€…ãŒæ‰€å±ã™ã‚‹ä¼æ¥­ãŒé–‹ç™ºã—ã¦ã„ã‚‹SaaSã§ã™
:::

[honeycomb]: https://www.honeycomb.io/

ã¾ãŸã€ãƒãƒ³ã‚ºã‚ªãƒ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ä½œæ¥­ã—ã¦ã„ãªã„ãŒã€æ‰‹å…ƒã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç·¨é›†ã—ã¦ç›£è¦–SaaSã«é€ä¿¡ã—ã¦ã¿ãŸã„æ–¹ã¯ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ã”å‚ç…§ãã ã•ã„ã€‚
ã€Œæ¸¬å®šãƒ‡ãƒ¼ã‚¿ã‚’SaaSã«é€ä¿¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å†…å®¹ã‚‚å®Ÿæ–½æ¸ˆã¿ãªã®ã§ã€ç›£è¦–SaaSã®èªè¨¼æƒ…å ±ã‚’ç’°å¢ƒå¤‰æ•°ã§æŒ‡å®šã™ã‚Œã°å‹•ä½œã™ã‚‹ã¯ãšã§ã™ã€‚

https://github.com/mirko-san/example-otel/tree/main/example/with-trace-and-log

### æ¸¬å®šãƒ‡ãƒ¼ã‚¿ã‚’SaaSã«é€ä¿¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å®Ÿè£…ãƒ¬ãƒ™ãƒ«ã§æ¨™æº–å‡ºåŠ›ã«å‡ºåŠ›ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ãŸã‚ã€ä¿®æ­£ãŒå¿…è¦ã§ã™ã€‚
ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§åˆ©ç”¨ã‚’å§‹ã‚ã‚‹ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å–å¾—ã—ã¾ã™ã€‚

```shellsession
$ go get go.opentelemetry.io/otel/exporters/otlp/otlplog/otlploghttp \
	go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracehttp
```

`server/main.go`ã¨`client/main.go`ã®ä¸¡æ–¹ã«ä»¥ä¸‹ã®ç·¨é›†ã‚’ã—ã¦ã„ãã¾ã™ã€‚

ä»¥ä¸‹ã‚’import blockã«è¿½åŠ ã—ã¾ã™ã€‚

```go
	"go.opentelemetry.io/otel/exporters/otlp/otlplog/otlploghttp"
	"go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracehttp"
```

ä»¥ä¸‹ã‚’import blockã‹ã‚‰å‰Šé™¤ã—ã¾ã™ã€‚

```go
	"go.opentelemetry.io/otel/exporters/stdout/stdouttrace"
	"go.opentelemetry.io/otel/exporters/stdout/stdoutlog"
```

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å ´åˆã®ã¿ã€ä»¥ä¸‹ã‚’import blockã‹ã‚‰å‰Šé™¤ã—ã¾ã™ã€‚

```go
	"os"
```

`newTraceExporter`é–¢æ•°ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã—ã¾ã™ã€‚

```go
func newTraceExporter(ctx context.Context) (sdktrace.SpanExporter, error) {
	return otlptracehttp.New(ctx)
}
```

`newTraceExporter`é–¢æ•°ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã—ã¾ã™ã€‚

```go
func newLogExporter(ctx context.Context) (sdklog.Exporter, error) {
	return otlploghttp.New(ctx)
}
```

ã¾ãŸã€ä¸Šè¨˜ã«ã‚ã‚ã›ã¦`newLogExporter`ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ç®‡æ‰€ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ã€‚

```go
	exp, err := newLogExporter(ctx)
```

### èªè¨¼æƒ…å ±ã‚’ç™»éŒ²ã™ã‚‹

ä¸Šè¨˜ã®ã‚ˆã†ã«OTel SDKã§å®Ÿè£…ã—ã¦ã„ã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ãªç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§é€ä¿¡å…ˆã‚„èªè¨¼æƒ…å ±ã®ç™»éŒ²ãŒã§ãã¾ã™ã€‚

```shellsession
$ export OTEL_EXPORTER_OTLP_PROTOCOL="http/protobuf"
export OTEL_EXPORTER_OTLP_ENDPOINT="https://api.honeycomb.io:443"
export OTEL_EXPORTER_OTLP_HEADERS="x-honeycomb-team=your-api-key"
```

`OTEL_EXPORTER_OTLP_HEADERS`ã®å€¤ã¯SaaSã«ã‚ˆã£ã¦ã•ã¾ã–ã¾ãªã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ¡ˆå†…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¦è¨­å®šã—ã¦ãã ã•ã„ã€‚

https://docs.honeycomb.io/get-started/start-building/application/traces/#configure-the-opentelemetry-sdk

ä¸Šè¨˜ã¾ã§ã®æ‰‹é †ã‚’å®Ÿè¡Œã—ã¦ã€ãƒ—ãƒ­ã‚»ã‚¹ã‚’å†èµ·å‹•ã™ã‚‹ã¨ãƒˆãƒ¬ãƒ¼ã‚¹ã¨ãƒ­ã‚°ãŒSaaSã«é€ä¿¡ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

### ãƒ–ãƒ©ã‚¦ã‚¶ã§è¦‹ã¦ã¿ã‚‹

honeycombã§ã®é›†è¨ˆã‚’ãŠè¦‹ã›ã—ã¾ã™ãŒã€ä»–ã®SaaSã§ã‚‚åŒæ§˜ã®ä½“é¨“ã¯ã§ãã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚

#### ãƒˆãƒ¬ãƒ¼ã‚¹ã®é–²è¦§

ã‚¯ã‚¨ãƒªç”»é¢ã§ãƒ‡ãƒ¼ã‚¿ã®å…¨ä½“ã‹ã‚‰å€‹åˆ¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚
ä»Šå›ã¯ãƒ‡ãƒ¼ã‚¿ãŒå°‘ãªã„ã®ã§ã€`Run Query`ã‚’æŠ¼ã—ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã‚¿ãƒ–ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’æ¢ã—ã¾ã™ã€‚

![ã‚¯ã‚¨ãƒªç”»é¢](/images/8198c43327d473/honeycomb-00.png)

ä¸Šå›³ã®`Trace ID`ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã“ã¨ã§ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã®è©³ç´°ç”»é¢ã‚’é–‹ãã¾ã™ã€‚
ã€ŒOpenTelemetry æ¦‚è¦ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹ã®ã¨ã“ã‚ã§è¦‹ãŸã‚ˆã†ãªã‚¹ãƒ‘ãƒ³ãŒè¦‹ãˆã¾ã™ã­ã€‚

![ãƒˆãƒ¬ãƒ¼ã‚¹ã®è©³ç´°ç”»é¢](/images/8198c43327d473/honeycomb-01.png)

ã‚¹ãƒ‘ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã¿ã‚‹ã¨ã€ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦ãƒ­ã‚°ãŒç´ã¥ã„ã¦ã„ã‚‹ã®ã§ã€ãƒ­ã‚°ã‚’è¾¿ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

![ãƒˆãƒ¬ãƒ¼ã‚¹ã®è©³ç´°ç”»é¢](/images/8198c43327d473/honeycomb-02.png)

#### ãƒ­ã‚°ã®é–²è¦§

ãƒˆãƒ¬ãƒ¼ã‚¹ã«ç´ã¥ã„ã¦ã„ãªã„ãƒ­ã‚°ã¯ãƒ­ã‚°ç”»é¢ã‹ã‚‰é–²è¦§ãŒå‡ºæ¥ã¾ã™ã€‚

![ã‚µãƒ¼ãƒ“ã‚¹ç”»é¢](/images/8198c43327d473/honeycomb-03.png)

ãƒãƒ³ã‚ºã‚ªãƒ³ã®ãƒ­ã‚°ã®è¨ˆè£…ã®ä¸­ã§ã€`Sending request...`ã®ãƒ­ã‚°ã¯`TraceID`ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ãªã„ãŸã‚ãƒˆãƒ¬ãƒ¼ã‚¹ç”»é¢ã‹ã‚‰ã¯è¦‹ã‚Œã¾ã›ã‚“ãŒã€ç‹¬ç«‹ã—ãŸãƒ­ã‚°ã¨ã—ã¦ã‚¯ã‚¨ãƒªã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

ã¾ãŸã¯ã€ã‚¯ã‚¨ãƒªã¨ã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ãªæ¡ä»¶ã§ã‚¯ã‚¨ãƒªã™ã‚‹ã¨ãƒ­ã‚°ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

- WHERE
  - `service.name = example-otel/client`
  - `meta.signal_type = log`
- GROUP BY
  - `body`

![ã‚¯ã‚¨ãƒªç”»é¢](/images/8198c43327d473/honeycomb-04.png)

## ã¾ã¨ã‚

æœ¬è¨˜äº‹ã§ã¯ã€OpenTelemetry-Goã‚’ç”¨ã„ãŸåˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹ã¨ãƒ­ã‚°ã®çµ±åˆæ–¹æ³•ã‚’ãƒãƒ³ã‚ºã‚ªãƒ³å½¢å¼ã§ç´¹ä»‹ã—ã¾ã—ãŸã€‚
ãƒˆãƒ¬ãƒ¼ã‚¹ã¨ãƒ­ã‚°ã‚’ä¸€å…ƒçš„ã«ç®¡ç†ã™ã‚‹ã“ã¨ã§ã€éšœå®³èª¿æŸ»ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã®å¯è¦³æ¸¬æ€§ãŒå¤§ããå‘ä¸Šã™ã‚‹ã“ã¨ãŒæƒ³åƒã¤ã„ãŸã‹ã¨æ€ã„ã¾ã™ã€‚

ã¾ãŸã€ã“ã‚Œã¾ã§ç›£è¦–SaaSã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šã‹ã£ãŸã‹ã‚‚çŸ¥ã‚Œãªã„ã§ã™ãŒã€OpenTelemetryã®ãƒ­ã‚°æ©Ÿèƒ½ã‚‚ååˆ†ã«å®Ÿç”¨çš„ã«ãªã£ã¦ãã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã£ãŸã‹ã¨æ€ã„ã¾ã™ã€‚
ä»Šå¾Œã¯ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä»¥å¤–ã®é¸æŠè‚¢ã¨ã—ã¦OpenTelemetryã®å°å…¥ã‚‚ãŠã™ã™ã‚ã§ã™ã€‚ãœã²æ¤œè¨ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
